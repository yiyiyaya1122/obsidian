# 🔍 今日概览

**TODO**
- [x] `HDF5切分`代码测试、优化
- [ ] `VR-Infer区分`、`数据标注`、`HDF5切分`流程跑通
- [x]  数据标注软件画面分片BUG解决
---

# ⏱️ 时间轴日志（9:00 - 22:00）

|    **时间段**    |             **事项记录**             | **问题记录** | **关键进展** |     |
| :-----------: | :------------------------------: | :------- | :------: | --- |
| 09:00 - 10:00 |  `export_keep_segments3`代码测试、优化  |          |          |     |
| 10:00 - 11:00 |           `VR-Infer`切分           |          |          |     |
| 11:00 - 12:00 |        `hdf5_viewer`代码熟悉         |          |          |     |
| 12:00 - 13:00 |           🍽️ 午餐 / 休息            |          |          |     |
| 13:00 - 14:00 |        数据标注软件画面分片`BUG`解决         |          |          |     |
| 14:00 - 15:00 |        数据标注软件画面分片`BUG`解决         |          |          |     |
| 15:00 - 16:00 |                                  |          |          |     |
| 16:00 - 17:00 |            `mp4topng`            |          |          |     |
| 17:00 - 18:00 | 优化`merge_json`代码（添加`log`，文件夹批处理） |          |          |     |
| 18:00 - 19:00 |           🍽️ 晚餐 / 休息            |          |          |     |
| 19:00 - 20:00 |                                  |          |          |     |
| 20:00 - 21:00 |                                  |          |          |     |
| 21:00 - 22:00 |                                  |          |          |     |

---
# 📥 今日充电

## 一、**HDF5切分**代码测试、优化
**准确性**：对比原始`HDF5`与切分后`HDF5`数据的**起始帧**和**结束帧**，切分结果准确，如下图
**耗时**：在`acer`上，切分3条`HDF5`数据，共耗时`15 min`，平均每条`HDF5`数据耗时`5 min`，如下图
**`CPU`占用**：在`acer`上，`CPU`占用情况如下图
**内存占用**：在`acer`上，内存占用情况如下图

[[HDF5_split_val_idx0_start_frame.png]]
[[HDF5_split_val_idx0_end_frame.png]]
[[HDF5_split_val_idx1_start_frame.png]]
[[HDF5_split_val_idx2_start_frame.png]]

![[Pasted image 20251017094536.png]]

![[Pasted image 20251017094637.png]]



## 二、VR-Infer区分

**存在问题**
1. 一些`HDF5`文件不存在`crtlmode`字段
2. 加载`HDF5`文件时，` Can't read data (file read failed: time = Fri Oct 17 10:10:07 2025, filename = '/home/midea/na3-volume3/compressed_data/vr_infer_tuoguan/random_folding_pants_basket_2folded_tuoguan_zjx_20251015_compressed/collection_1760492374.hdf5', file descriptor = 3, errno = 5, error message = 'Input/output error', buf = 0x418bb80, total read size = 2616, bytes this sub-read = 2616, bytes actually read = 18446744073709551615, offset = 0)`

**问题排查**
1. 通过打印`HDF5`文件结构，查看是否该`HDF5`文件中是否添加`ctrlmode`字段，排查发现`olf`在`15`号和`16`号两天采集的数据均没有添加字段
2. 通过运行`h5stat` 排查发现该文件没有问题，用`pyhon`的`h5py`模块可正常读取，重新运行程序不报错
``` bash
# 安装hdf5工具（若未安装） 
sudo apt install hdf5-tools 
# 检查文件完整性 
h5stat /home/midea/na3-volume3/.../collection_1760492374.hdf5
```




## 三、数据标注软件画面分片BUG解决

**存在问题**
如下图所示，标注软件显示时，`cam_high`和`cam_right_wrist`会形成如图所示的**残影**
![[Pasted image 20251017152340.png]]
![[Pasted image 20251017152140.png]]

**问题排查**
排查思路为`HDF5`读取的原始数据 -->  `pyqt`转换数据，使用`OpenCV`将从`HDF5`读取的数据保存为`png`发现有残影，对比`more_cameras_hdf5_random_sample_20fps.py`发现，图像未进行`imdecode`



> [!question] QUESTION
> 为什么未进行`imdecode`图像会有残影？

---


## 四、cursor安装使用

https://blog.csdn.net/m0_68116052/article/details/142832657


## 五、mp4topng
使用`OpenCV`处理 easy



# ✅ 完成事项（Top 3）

- [ ] 
- [ ] 
- [ ] 

---

# 🧠 总结与反思

| 项目           | 内容                         |
|----------------|------------------------------|
| 🎯 是否达成目标 |                              |
| 🧱 碰到的困难   |                              |
| 🧰 解决方法     |                              |
| ✨ 明日优化点   |                              |
| 💭 自我感受     |                              |

---

# 📌 明日计划

- [ ] 
- [ ] 
- [ ] 
